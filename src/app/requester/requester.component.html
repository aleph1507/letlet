<div class="requester-container">
  <div class="req-form-container">
    <form class="requester-form" id="requester-form" (ngSubmit)="onSubmit()" [formGroup]="requesterForm" novalidate>
      <mat-form-field class="requester-field">
        <input matInput
          placeholder="Requester Name"
          id="requesterName"
          name="requesterName"
          formControlName="requesterName"
          autocomplete="off"
          required>
      </mat-form-field>
      <mat-form-field class="requester-field">
        <textarea name="requesterDescription"
          id="requesterDescription"
          matInput placeholder="Description"
          formControlName="requesterDescription"
          autocomplete="off"
        ></textarea>
      </mat-form-field>
      <!-- <mat-form-field class="requester-field">
        <input matInput
          formControlName="requesterCompany"
          [matAutocomplete]="companyAuto"
          name="requesterCompany"
          id="requesterCompany"
          placeholder="Company" required>
          <mat-autocomplete #companyAuto="matAutocomplete">
            <mat-option *ngFor="let company of filteredCompanies | async" [value]="company">
              {{ company.name }}
            </mat-option>
          </mat-autocomplete>
      </mat-form-field> -->
      <mat-form-field class="requester-field">
        <input matInput type="text" name='requesterCompany'
        id="requesterCompany" placeholder="Company"
        formControlName="requesterCompany"
        [matAutocomplete]="comp"
        required>
      </mat-form-field>
      <mat-autocomplete #comp="matAutocomplete" [displayWith]="displayFn">
          <mat-option *ngFor="let c of companies" [value]="c" >
            {{ c.name }}
          </mat-option>
      </mat-autocomplete>
      <mat-form-field>
        <input matInput [matDatepicker]="fromPicker" placeholder="From date"
        formControlName="requesterFromDate" required>
        <mat-datepicker-toggle matSuffix [for]="fromPicker"></mat-datepicker-toggle>
        <mat-datepicker #fromPicker></mat-datepicker>
      </mat-form-field>
      <mat-form-field>
        <input matInput [matDatepicker]="toPicker" placeholder="To date"
        formControlName="requesterToDate" required>
        <mat-datepicker-toggle matSuffix [for]="toPicker"></mat-datepicker-toggle>
        <mat-datepicker #toPicker></mat-datepicker>
      </mat-form-field>
      <mat-form-field *ngIf="!editMode">
        <mat-select placeholder="Number of entries" formControlName="requesterNumOfEntries"
          name="requesterNumOfEntries" id="requesterNumOfEntries" autocomplete="off" required>
          <!-- <mat-option></mat-option> -->
          <mat-option *ngFor="let e of nEntries" selected [value]="e.value">
            {{e.name}}
          </mat-option>
        </mat-select>
        <!-- <mat-error *ngIf="requesterNumOfEntries.hasError('required')">Please choose a number of allowed entries</mat-error> -->
        <!-- <mat-hint>{{animalControl.value?.sound}}</mat-hint> -->
      </mat-form-field>
      <mat-form-field *ngIf="editMode">
        <input matInput
          placeholder="Number of entries"
          name="requesterNumberOfEntries"
          formControlName="requesterNumOfEntries"
          autocomplete="off"
          required>
      </mat-form-field>

      <button *ngIf="!editMode" mat-raised-button type="submit" color="primary" [disabled]="!requesterForm.valid" class="main-send">Send</button>
      <button *ngIf="showApproveBtn" (click)="approve(request.id)" mat-raised-button color="primary" class="main-send">Approve</button>
      <button *ngIf="showDeclineBtn" (click)="decline(request.id)" mat-raised-button color="primary" class="main-send">Decline</button>
    </form>

    <div *ngIf="editMode" class="print-request" id="print-request">
      <mat-icon (click)="printRequest()"
      class="icon-control">print</mat-icon>
      <mat-icon (click)="printRequest2()"
      class="icon-control">print</mat-icon>
    </div>

  </div>
  <div class="requester-props-container">
    <div class="requester-prop mat-elevation-z8">
      <mat-list dense role="list">
        <mat-list-item *ngFor="let person of requesterService.getAllPersons(); let i = index">
          <div class="list-row">
            <div>
              <span class="person-name">{{person.name}}</span>
              <span class="person-surname">{{person.surname}}</span>
            </div>
            <div>
              <mat-icon *ngIf="!editMode" matListIcon
                (click)="editPerson(i)"
                class="icon-control"
                >border_color</mat-icon>
              <mat-icon *ngIf="!editMode" matListIcon
                (click)="deletePerson(i)"
                class="icon-control">delete</mat-icon>
            </div>
          </div>
          <mat-divider></mat-divider>
        </mat-list-item>
      </mat-list>
      <button mat-mini-fab *ngIf="!editMode" color="primary" (click)="openPersonDialog()" id="plusPerson">+
      </button>
    </div>
    <div class="requester-prop mat-elevation-z8">
      <mat-list dense role="list">
        <mat-list-item *ngFor="let vehicle of requesterService.getAllVehicles(); let i = index">
          <div class="list-row">
            <div>
              <span class="vehicle-plate">{{vehicle.plate}}</span>
            </div>
            <div>
              <mat-icon *ngIf="!editMode" matListIcon
                (click)="editVehicle(i)"
                class="icon-control"
                >border_color</mat-icon>
              <mat-icon *ngIf="!editMode" matListIcon
                (click)="deleteVehicle(i)"
                class="icon-control">delete</mat-icon>
            </div>
          </div>
          <mat-divider></mat-divider>
        </mat-list-item>
      </mat-list>
      <button mat-mini-fab *ngIf="!editMode" color="primary" (click)="openVehicleDialog()" id="plusVehicle">+
      </button>
    </div>
    <div style="text-align:right">
      <!-- <button mat-raised-button class="main-send">Send</button> -->
    </div>
  </div>
</div>
